import{e as M,a as L,o as T,m as q,r,$ as Q,a0 as z,j as e,N as B,S as G,s as J,d as K}from"./index-5cb102fc.js";import{A as O}from"./AdminSidebar-17868f19.js";import{r as U}from"./features-fedf4e3f.js";import"./index.esm-76edac89.js";const Z=()=>{const{user:o}=M(s=>s.userReducer),P=L(),h=T(),{data:t,isLoading:k,isError:D}=q(P.id),{price:m,photo:C,description:I,name:x,stock:c,category:F}=(t==null?void 0:t.product)||{photo:"",category:"",name:"",description:"",stock:0,price:0},[i,j]=r.useState(m),[d,g]=r.useState(c),[l,v]=r.useState(x),[p,f]=r.useState(I),[u,b]=r.useState(F),[y,w]=r.useState(""),[S,A]=r.useState(),[_]=Q(),[E]=z(),R=s=>{var N;const a=(N=s.target.files)==null?void 0:N[0],n=new FileReader;a&&(n.readAsDataURL(a),n.onloadend=()=>{typeof n.result=="string"&&(w(n.result),A(a))})},$=async s=>{s.preventDefault();const a=new FormData;l&&a.set("name",l),p&&a.set("description",p),i&&a.set("price",i.toString()),d!==void 0&&a.set("stock",d.toString()),S&&a.set("photo",S),u&&a.set("category",u);const n=await _({formData:a,userId:o==null?void 0:o._id,productId:t==null?void 0:t.product._id});U(n,h,"/admin/product")},H=async()=>{const s=await E({userId:o==null?void 0:o._id,productId:t==null?void 0:t.product._id});U(s,h,"/admin/product")};return r.useEffect(()=>{t&&(v(t.product.name),f(t.product.description),j(t.product.price),g(t.product.stock),b(t.product.category))},[t]),D?e.jsx(B,{to:"/404"}):e.jsxs("div",{className:"admin-container",children:[e.jsx(O,{}),e.jsx("main",{className:"product-management",children:k?e.jsx(G,{length:20}):e.jsxs(e.Fragment,{children:[e.jsxs("section",{children:[e.jsxs("strong",{children:["ID - ",t==null?void 0:t.product._id]}),e.jsx("img",{src:`${J}/${C}`,alt:"Product"}),e.jsx("p",{children:x}),c>0?e.jsxs("span",{className:"green",children:[c," Available"]}):e.jsx("span",{className:"red",children:" Not Available"}),e.jsxs("h3",{children:["$",m]})]}),e.jsxs("article",{children:[e.jsx("button",{className:"product-delete-btn",onClick:H,children:e.jsx(K,{})}),e.jsxs("form",{onSubmit:$,children:[e.jsx("h2",{children:"Manage"}),e.jsxs("div",{children:[e.jsx("label",{children:"Name"}),e.jsx("input",{type:"text",placeholder:"Name",value:l,onChange:s=>v(s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Description"}),e.jsx("input",{required:!0,type:"text",placeholder:"Description",value:p,onChange:s=>f(s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Price"}),e.jsx("input",{type:"number",placeholder:"Price",value:i,onChange:s=>j(Number(s.target.value))})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Stock"}),e.jsx("input",{type:"number",placeholder:"Stock",value:d,onChange:s=>g(Number(s.target.value))})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Category"}),e.jsx("input",{type:"text",placeholder:"eg. laptop, camera etc",value:u,onChange:s=>b(s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Photo"}),e.jsx("input",{type:"file",onChange:R})]}),y&&e.jsx("img",{src:y,alt:"New Image"}),e.jsx("button",{type:"submit",children:"Update"})]})]})]})})]})};export{Z as default};
